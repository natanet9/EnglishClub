{% extends 'base.html' %}

{% block title %}Dashboard {{ user.rol|capfirst }}{% endblock %}

{% block content %}

  <!-- Contenido principal -->
  <main class="flex-1 p-8 bg-gray-50">
    <h2 class="text-2xl font-bold text-blue-800 mb-2">游녦 Bienvenido/a, {{ user.nombre }} {{ user.apellidos}}</h2>
    <p class="mb-6 text-gray-600">
      Este es tu panel de control como {{ user.rol|capfirst }} del <span class="font-semibold">Instituto English Club</span>.
    </p>
 
    <!-- M칠tricas principales -->
   <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <!-- Estudiantes -->
   {% if user.rol == 'directivo' %}
  <div class="bg-white p-4 rounded-2xl shadow text-center">
    <canvas id="chartEstudiantes" width="100" height="100"></canvas>
    <h3 class="mt-2 text-sm font-semibold text-gray-500">Calificaciones Diarias </h3>
    <p class="text-lg font-bold text-blue-600">25</p>
  </div>
  
  <!-- Asistencia promedio -->
  <div class="bg-white p-4 rounded-2xl shadow text-center">
    <canvas id="chartAsistencia" width="100" height="100"></canvas>
    <h3 class="mt-2 text-sm font-semibold text-gray-500">Asistencia promedio</h3>
    <p class="text-lg font-bold text-green-600">89%</p>
  </div>

  <!-- Tasa de aprobaci칩n -->
  <div class="bg-white p-4 rounded-2xl shadow text-center">
    <canvas id="chartAprobacion" width="100" height="100"></canvas>
    <h3 class="mt-2 text-sm font-semibold text-gray-500">Tasa de aprobaci칩n</h3>
    <p class="text-lg font-bold text-purple-600">76%</p>
  </div>
   <!-- 칈ndice de deserci칩n -->
  <div class="bg-white p-4 rounded-2xl shadow text-center">
    <canvas id="chartDesercion" width="100" height="100"></canvas>
    <h3 class="mt-2 text-sm font-semibold text-gray-500">칈ndice de deserci칩n</h3>
    <p class="text-lg font-bold text-red-600">5.2%</p>
  </div>




    <!-- Filtros -->
    <div class="flex flex-wrap gap-4 mb-10">
      <select class="p-2 rounded-xl border shadow bg-white" name="periodo">
        <option>Periodo actual</option>
        <option>2024-I</option>
        <option>2023-II</option>
      </select>
      <select class="p-2 rounded-xl border shadow bg-white" name="nivel">
        <option>Todos los niveles</option>
        <option>B치sico</option>
        <option>Intermedio</option>
        <option>Avanzado</option>
      </select>
      <select class="p-2 rounded-xl border shadow bg-white" name="curso">
        <option>Todos los cursos</option>
        <option>English 1</option>
        <option>English 2</option>
      </select>
      <select class="p-2 rounded-xl border shadow bg-white" name="docente">
        <option>Todos los docentes</option>
        <option>Ms. Johnson</option>
        <option>Mr. Smith</option>
      </select>
    </div>

    <!-- Aqu칤 puedes incluir vistas din치micas como tablas o reportes -->
    <div class="bg-white p-6 rounded-xl shadow text-gray-600">
      <p>Selecciona una opci칩n del panel lateral para ver m치s detalles o gestionar el sistema.</p>
    </div>
  </main>
</div>

{% endif %}


{% if user.rol == 'estudiante' %}

<!-- Aqu칤 le pones dise침o Lino pa estudiantes dentro de ese if-->

{% endif %}

<script>
  const crearGraficaCircular = (idCanvas, porcentaje, color) => {
    new Chart(document.getElementById(idCanvas), {
      type: 'doughnut',
      data: {
        datasets: [{
          data: [porcentaje, 100 - porcentaje],
          backgroundColor: [color, '#e5e7eb'],
          borderWidth: 0
        }]
      },
      options: {
        cutout: '70%',
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false }
        }
      }
    });
  };

  // Datos simulados
  crearGraficaCircular("chartEstudiantes", 100, "#3b82f6"); // 100% porque es cantidad
  crearGraficaCircular("chartAsistencia", 89, "#22c55e");
  crearGraficaCircular("chartAprobacion", 76, "#a855f7");
  crearGraficaCircular("chartDesercion", 5.2, "#ef4444");
</script>

{% endblock %}

